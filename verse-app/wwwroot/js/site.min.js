function GetVerse(){var n=Math.round(Math.random()*(Phil.length-1)),t="Philippians"+Phil[n];$.ajax({url:"https://api.esv.org/v3/passage/html/?q="+t+"&include-verse-anchors=false&include-chapter-numbers=false&include-first-verse-numbers=false&include-footnotes=false&include-headings=false&include-subheadings=false&include-audio-link=false",type:"GET",headers:{Authorization:"Token 00706264fcd4c12e299878dbdf3af0608adbabff"},success:function(n){$("#Verse").html(n.passages)}})}function SubmitVerse(){var f=$("#Typed").val(),i=$("#Verse").find("p:first").text(),n=calculateLevDistance("",i),r=calculateLevDistance(f,i),t=Math.round((1-r/n)*100),u=Math.round(t*t*n/1e3);console.log(r,n);Score+=u;$("#Score").text("Score: "+Score);$("#History > tbody").prepend("<tr><td>"+u+"<\/td > <td>"+t+"%<\/td> <td>"+$("#Typed").val()+"<\/td><\/tr > ")}function TimeTick(){Time-=1;Time===0?(clearInterval(Timer),Status="End",$("#FinalScore").text("Score: "+Score),$("#EndPage").show()):Time%60<10?$("#Time").text("Time: "+Math.floor(Time/60)+":0"+Time%60):$("#Time").text("Time: "+Math.floor(Time/60)+":"+Time%60)}function calculateLevDistance(n,t){var s,e=n.length,f=t.length,h,c,r=[],o,i,u;for(r[0]=[],e<f&&(h=n,n=t,t=h,c=e,e=f,f=c),o=0;o<f+1;o++)r[0][o]=o;for(i=1;i<e+1;i++)for(r[i]=[],r[i][0]=i,u=1;u<f+1;u++)s=n.charAt(i-1)===t.charAt(u-1)?0:1,r[i][u]=Math.min(r[i-1][u]+1,r[i][u-1]+1,r[i-1][u-1]+s);return r[e][f]}var Timer=null,Time=120,Score=0,Status="Start",Phil=["1:6","2:1","2:5","2:6","2:12","3:20","4:4","4:6-7","4:8","4:13","4:19"];$(document).ready(function(){$("#EndPage").hide()});$("#Start").click(function(){$("#StartPage").hide();GetVerse();$("#Typed").focus();setTimeout(Timer=setInterval(TimeTick,1e3),1e3)});$(document).keypress(function(n){n.keyCode===13&&Status==="Start"?(Status="",$("#Start").click()):n.keyCode===13&&Status==="End"&&(Status="",$("#Restart").click())});$("#Restart").click(function(){$("#EndPage").hide();Score=0;GetVerse();$("#Typed").focus();setTimeout(Timer=setInterval(TimeTick,1e3),1e3)});$("#Submit").click(function(){SubmitVerse();GetVerse();$("#Typed").val("")});$("#Typed").on("keypress",function(n){n.keyCode===13&&$("#Typed").val().length>5&&$("#Submit").click()});